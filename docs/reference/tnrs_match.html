<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Taxon name resolution service (tnrs) applied to a vector of names by batches"><title>Taxon name resolution service (tnrs) applied to a vector of names by batches — tnrs_match • datelife</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Taxon name resolution service (tnrs) applied to a vector of names by batches — tnrs_match"><meta property="og:description" content="Taxon name resolution service (tnrs) applied to a vector of names by batches"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">datelife</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.9</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Getting_started_with_datelife.html">Getting started</a>
    <a class="dropdown-item" href="../articles/fringiliidae.html">Case study: the true finches</a>
    <a class="dropdown-item" href="../articles/make_datelife_query.html">Making a DateLife query</a>
    <a class="dropdown-item" href="../articles/making_bold_trees.html">Estimating initial branch lengths</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/phylotastic/datelife/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Taxon name resolution service (tnrs) applied to a vector of names by batches</h1>
      <small class="dont-index">Source: <a href="https://github.com/phylotastic/datelife/blob/HEAD/R/opentree_taxonomy_general.R" class="external-link"><code>R/opentree_taxonomy_general.R</code></a></small>
      <div class="d-none name"><code>tnrs_match.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Taxon name resolution service (tnrs) applied to a vector of names by batches</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tnrs_match</span><span class="op">(</span><span class="va">input</span>, <span class="va">reference_taxonomy</span>, <span class="va">tip</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">tnrs_match</span><span class="op">(</span><span class="va">input</span>, reference_taxonomy <span class="op">=</span> <span class="st">"ott"</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for phylo</span></span>
<span><span class="fu">tnrs_match</span><span class="op">(</span><span class="va">input</span>, reference_taxonomy <span class="op">=</span> <span class="st">"ott"</span>, tip <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>input</dt>
<dd><p>A character vector of taxon names, or a phylo object with tip names, to be matched to taxonomy.</p></dd>


<dt>reference_taxonomy</dt>
<dd><p>A character vector specifying the reference taxonomy to use for TNRS.
Options are "ott", "ncbi", "gbif" or "irmng". The function defaults to "ott".</p></dd>


<dt>tip</dt>
<dd><p>A vector of mode numeric or character specifying the tips to match. If left empty all tips will be matched.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code><a href="https://docs.ropensci.org/rotl/reference/tnrs_match_names.html" class="external-link">rotl::tnrs_match_names</a></code></p><dl><dt><code>context_name</code></dt>
<dd><p>name of the taxonomic context to be searched (length-one
character vector or <code>NULL</code>). Must match (case sensitive) one of the
values returned by <code><a href="https://docs.ropensci.org/rotl/reference/tnrs_contexts.html" class="external-link">tnrs_contexts</a></code>. Default to "All life".</p></dd>

    <dt><code>do_approximate_matching</code></dt>
<dd><p>A logical indicating whether or not to
perform approximate string (a.k.a. “fuzzy”) matching. Using
<code>FALSE</code> will greatly improve speed. Default, however, is <code>TRUE</code>.</p></dd>

    <dt><code>ids</code></dt>
<dd><p>A vector of ids to use for identifying names. These will be
assigned to each name in the names array. If ids is provided, then ids and
names must be identical in length.</p></dd>

    <dt><code>include_suppressed</code></dt>
<dd><p>Ordinarily, some quasi-taxa, such as incertae
sedis buckets and other non-OTUs, are suppressed from TNRS results. If
this parameter is true, these quasi-taxa are allowed as possible TNRS
results.</p></dd>

  
</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class  data frame or phylo, with the added class match_names.</p>


<p><code>NULL</code></p>



<p><code>NULL</code></p>


    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>There is no limit to the number of names that can be queried and matched.</p>
<p>The output will preserve all elements from original input phylo object and will add</p><dl><dt>phy$mapped</dt>
<dd><p>A character vector indicating the state of mapping of phy$tip.labels:</p></dd>








<dt>phy$original.tip.label</dt>
<dd><p>A character vector preserving all original labels.</p></dd>

<dt>phy$ott_ids</dt>
<dd><p>A numeric vector with ott id numbers of matched tips. Unmatched and original tips will be NaN.</p></dd>


</dl><p>if tips are duplicated, tnrs will only be run once (avoiding increases in function running time) but the result will be applied to all duplicated tip labels</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">tnrs_match</span><span class="op">(</span>input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Mus"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ---&gt; Runnning TNRS to match input names to reference taxonomy (OTT).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%  |                                                                              |======================================================================| 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   search_string                  unique_name approximate_match score  ott_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           mus Mus (genus in Deuterostomia)             FALSE     1 1068778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   is_synonym          flags number_matches</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      FALSE SIBLING_HIGHER              3</span>
<span class="r-in"><span><span class="fu">tnrs_match</span><span class="op">(</span>input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Mus"</span>, <span class="st">"Mus musculus"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ---&gt; Runnning TNRS to match input names to reference taxonomy (OTT).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%  |                                                                              |===================================                                   |  50%  |                                                                              |======================================================================| 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   search_string                  unique_name approximate_match score  ott_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           mus Mus (genus in Deuterostomia)             FALSE     1 1068778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  mus musculus                 Mus musculus             FALSE     1  542509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   is_synonym          flags number_matches</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      FALSE SIBLING_HIGHER              3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      FALSE                             1</span>
<span class="r-in"><span><span class="fu">tnrs_match</span><span class="op">(</span>input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Mus"</span>, <span class="st">"Echinus"</span>, <span class="st">"Hommo"</span>, <span class="st">"Mus"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ---&gt; Runnning TNRS to match input names to reference taxonomy (OTT).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%  |                                                                              |=======================                                               |  33%  |                                                                              |===============================================                       |  67%  |                                                                              |======================================================================| 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     search_string                     unique_name approximate_match score</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             mus    Mus (genus in Deuterostomia)             FALSE  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         echinus Echinus (genus in Opisthokonta)             FALSE  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           hommo                            Homo              TRUE  0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1.1           mus    Mus (genus in Deuterostomia)             FALSE  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ott_id is_synonym          flags number_matches</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1068778      FALSE SIBLING_HIGHER              3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    616574      FALSE sibling_higher              4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    770309      FALSE sibling_higher              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1.1 1068778      FALSE SIBLING_HIGHER              3</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Brian O’Meara, Jonathan Eastman, Tracy Heath, April Wright, Klaus Schliep, Scott Chamberlain, Peter Midford, Luke Harmon, Joseph Brown, Matt Pennell, Mike Alfaro, Luna L. Sanchez Reyes.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

